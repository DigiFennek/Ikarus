//***************************************************************************
//* IKARUS HELIKOPTER-SIMULATOR
//***************************************************************************
//*
//*  - Helikopter Cockpit
//*
//***************************************************************************

#include <stdlib.h>
#include "ikarus2.h"
#include "geometry.h"

extern int autoPilot;
extern int autoLanding;
extern int cockpitOn;

// 144 x 140
char panelMap[] =
{
  "5555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555................."
  "5555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555.............."
  "555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555............"
  "00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005555555.........."
  "111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111100055555........."
  "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111005555........"
  "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111110555........"
  "11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111110555......."
  "11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111110555......."
  "111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111110555......"
  "111111111100000000000000000000000000000111111111111110000000000000000000000000000011111111111111000000000000000000000000000001111111110555......"
  "111111110022222222222222222222222222222001111111111002222222222222222222222222222200111111111100222222222222222222222222222220011111110555......"
  "1111111022222222222200000000022222222222201111111102222222222220000000002222222222220111111110222222222222000000000222222222222011111110555....."
  "11111110222222222000.........00022222222201111111102222222220001111111110002222222220111111110222222222000000000000000222222222011111110555....."
  "11111102222222200...............00222222220111111022222222001111111411111110022222222011111102222222200000.........000002222222201111110555....."
  "111111022222220...................022222220111111022222220111111111411111111102222222011111102222222000...............000222222201111110555....."
  "11111102222220.....................022222201111110222222011111111114111111111102222220111111022222200...................0022222201111110555....."
  "1111110222220.......................0222220111111022222011144114111411141114111022222011111102222200.....................002222201111110555....."
  "111111022220.........................02222011111102222011141114141111141414141110222201111110222200.......................00222201111110555....."
  "111111022220.........................0222201111110222201114411414111111411414111022220111111022220.........................02222011111110555...."
  "11111102220...........................022201111110222011114141414111114141414111102220111111022200.........................00222011111110555...."
  "11111102220...........................02220111111022201111141114111111141114111110222011111102220...........................0222011111110555...."
  "1111110220..............0..............0220111111022011441111111111111111111114411022011111102200...........................0022011111110555...."
  "1111110220.............040.............0220111111022011114411111111111111111441111022011111102200...........................0022011111110555...."
  "111111020..............040..............02011111102011111111111111111111111111111110201111110200.............................002011111110555...."
  "111111020.............04440.............02011111102011111111111111111111111111111110201111110200.............................002011111110555...."
  "111111020.............04440.............02011111102014141141111111111111411141114110201111110200.............................0020111111110555..."
  "111111020............0444440............02011111102014141414111111111114411414141410201111110200.............................0020111111110555..."
  "111111020............0004000............02011111102014441414111111151111411414141410201111110200.....4444444.....4444444.....0020111111110555..."
  "111111020..............040..............02011111102011141414111111111111411414141410201111110200..........010...010..........0020111111110555..."
  "111111020..............040..............02011111102011141141111111111114441141114110201111110200...........0100010...........0020111111110555..."
  "111111020..............040..............02011111102011111111111111111111111111111110201111110200............01110............0020111111110555..."
  "111111020..............040..............02011111102011111111111111111111111114111110201111110200.............010.............0020111111110555..."
  "1111110220.............000.............0220111111022011114411111111441411441144111022011111102200............010............002201111111110555.."
  "1111110220.............................0220111111022011441111111111414141414141411022011111102200............010............002201111111110555.."
  "11111102220...........................02220111111022201111441114111414141441141410222011111102220............010............022201111111110555.."
  "11111102220...........................022201111110222011111141414111111114111111102220111111022200...........010...........0022201111111110555.."
  "111111022220.........................0222201111110222201114411414114111111111111022220111111022220...........010...........0222201111111110555.."
  "111111022220.........................02222011111102222011141114141141111111111110222201111110222200.........01110.........00222201111111110555.."
  "1111110222220.......................0222220111111022222011444114111411111111111022222011111102222200........01110........002222201111111110555.."
  "11111102222220.....................022222201111110222222011111111114111111111102222220111111022222200.......01110.......00222222011111111110555."
  "111111022222220...................022222220111111022222220111111111411111111102222222011111102222222000....0111110....0002222222011111111110555."
  "11111102222222200...............022222222201111110222222220011111114111111102222222220111111022222222000000111111100000022222222011111111110555."
  "11111110222222222000.........000222222222011111111022222222200011111111100022222222201111111102222222220001111111110002222222220111111111110555."
  "11111110222222222222000000000222222222222011111111022222222222200000000022222222222201111111102222222222220000000002222222222220111111111110555."
  "11111111002222222222222222222222222222200111111111100222222222222222222222222222220011111111110022222222222222222222222222222001111111111110555."
  "11111111110000000000000000000000000000011111111111111000000000000000000000000000001111111111111100000000000000000000000000000111111111111110555."
  "111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111110555"
  "111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111110555"
  "111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111110555"
  "111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111110555"
  "111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111110555"
  "111111111100000000000000000000000000000111111111111110000000000000000000000000000011111111111111000000000000000000000000000001111111111111110555"
  "111111110022222222222222222222222222222001111111111002222222222222222222222222222200111111111100222222222222222222222222222220011111111111110555"
  "111111102222222222220000000002222222222220111111110222222222222000000000222222222222011111111022222222222200000000022222222222201111111111110555"
  "111111102222222220009999111110002222222220111111110222222222000111111111000222222222011111111022222222200011111111100022222222201111111111110555"
  "111111022222222009999999411111110022222222011111102222222200111114111411111002222222201111110222222220011111114111111100222222220111111111110555"
  "111111022222220999999994141111111102222222011111102222222011111144114141111110222222201111110222222201111111141411111111022222220111111111110555"
  "111111022222209994999994141111141110222222011111102222220111111114114141111111022222201111110222222011141111141411111411102222220111111111110555"
  "111111022222089949499994141111441111022222011111102222201111111114114141111111102222201111110222220111414111141411114411110222220111111111110555"
  "111111022220888994499999411111141111102222011111102222011444111144411411111111110222201111110222201111144111114111111411111022220111111111110555"
  "111111022220888899499999111111141111102222011111102222011411111111111111144111410222201111110222201111114111111111111411111022220111111111110555"
  "111111022208888844999999111111444111110222011111102220111441111111111111111414141022201111110222011111441111111111114441111102220111111111110555"
  "111111022207888888999999111111111111110222011111102220111114111111111111114114141022201111110222011111111111111111111111111102220111111111110555"
  "111111022077748888899999111111111144111022011111102201111441111111111111141114141102201111110220111411111111111111111111441110220111111111110555"
  "111111022077474788889999111111111111411022011111102201111111111111111111144411411102201111110220114141111111111111111111114110220111111111110555"
  "111111020777747777888999111111111114111102011111102011111111111111111111111111111110201111110201111411111111111111111111141111020111111111110555"
  "111111020777474777778899111111111141111102011111102011111111111111111111111111111110201111110201114141111111111111111111411111020111111111110555"
  "111111020777747777777789111111111144411102011111102011411111111111111111111111111110201111110201111411111111111111111111444111020111111111110555"
  "111111020777777777777777111111111111111102011111102014141111111111111111111111111110201111110201111111111111111111111111111111020111111111110555"
  "111111020777777777777777511111111111111102011111102014141111111111151144444444444410201111110201111111111111115111111111111111020111111111110555"
  "111111020777777777771111111111111111111102011111102014141111111111111111111111111110201111110201111111111111111111111111111111020111111111110555"
  "111111020777444711111111111111111144111102011111102011411111111111111111111111111110201111110201114441111111111111111111441111020111111111110555"
  "111111020777114111111144111111111111411102011111102011111111111111111111111111111110201111110201111141111141141144411111114111020111111111110555"
  "111111020111141111141141414414111114111102011111102011111111114141144141111111111110201111110201111411111414141114111111141111020111111111110555"
  "111111022011411111414144114141411111411022011111102201111111114141441141144111411102201111110220114111111444141114111111114110220111111111110555"
  "111111022011411111411141114141411144111022011111102201111444111411114141111414141102201111110220114111111414144414111111441110220111111111110555"
  "111111022201111111111111111111111111110222011111102220111411111411444141114114141022201111110222011111111111111111111111111102220111111111110555"
  "111111022201111114411111111114141111110222011111102220111441111111111111141114141022201111110222011111144111111111141411111102220111111111110555"
  "111111022220111141111111111114141111102222011111102222011114111111111111144411410222201111110222201111411111111111141411111022220111111111110555"
  "111111022220111144111114441114441111102222011111102222011441111114111411111111110222201111110222201111441111144411144411111022220111111111110555"
  "111111022222011141411114111111141111022222011111102222201111111144114141111111102222201111110222220111414111141111111411110222220111111111110555"
  "111111022222201114111114411111141110222222011111102222220111111114114141111111022222201111110222222011141111144111111411102222220111111111110555"
  "111111022222220111111111141111111102222222011111102222222011111114114141111110222222201111110222222201111111111411111111022222220111111111110555"
  "111111022222222001111114411111110022222222011111102222222200111144411411111002222222201111110222222220011111144111111100222222220111111111110555"
  "111111102222222220001111111110002222222220111111110222222222000111111111000222222222011111111022222222200011111111100022222222201111111111110555"
  "111111102222222222220000000002222222222220111111110222222222222000000000222222222222011111111022222222222200000000022222222222201111111111110555"
  "111111110022222222222222222222222222222001111111111002222222222222222222222222222200111111111100222222222222222222222222222220011111111111110555"
  "111111111100000000000000000000000000000111111111111110000000000000000000000000000011111111111111000000000000000000000000000001111111111111110555"
  "111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111110555"
  "111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111110555"
  "111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111110555"
  "111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111110555"
  "111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111110555"
  "111111111100000000000000000000000000000111111111111110000000000000000000000000000011111111111111000000000000000000000000000001111111111111110555"
  "111111110022222222222222222222222222222001111111111002222222222222222222222222222200111111111100222222222222222222222222222220011111111111110555"
  "111111102222222222220000000002222222222220111111110220000000000000000000000000000022011111111022222222222200000000022222222222201111111111110555"
  "111111102222222220001111111110002222222220111111110200111111111111111111111111111002011111111022222222200011111111100022222222201111111111110555"
  "111111022222222001111119999111110022222222011111102001111111111111141111111111111100201111110222222220011111111111111100222222220111111111110555"
  "111111022222220111117779999111111102222222011111102011111111111111111111111111111110201111110222222201111111111111111111022222220111111111110555"
  "111111022222201111777779999111111110222222011111102011111111111111141111111111111110201111110222222011111111111111111111102222220111111111110555"
  "111111022222011177777777111111111111022222011111102011111111111111111111111111111110201111110222220111111141111111111111110222220111111111110555"
  "111111022220111777777111111111111111102222011111102011111111111111141111111111111110201111110222201111111114111111111111111022220111111111110555"
  "111111022220117777711141141411114411102222011111102011111111111111111111111111111110201111110222201111111111411111111111111022220111111111110555"
  "111111022201119777111414141411114141110222011111102011111111111111141111111111111110201111110222011111111111141111111111111102220111111111110555"
  "111111022201199991111414141411114411110222011111102011111111111111111111111111111110201111110222011111111111111111111111111102220111111111110555"
  "111111022011199991111141141444114111111022011111102011111111111111141111111111111110201111110220111111111111111111111111111110220111111111110555"
  "111111022011999911111111111111111111111022011111102011111111111111111111111111111110201111110220111111444111111111111111111110220111111111110555"
  "111111020111999911111111111111111111111102011111102011111111111111141111111111111110201111110201111111111441111111111111111111020111111111110555"
  "111111020111999911111111115111111111111102011111102011111111111111111111111111111110201111110201111111111111111111111111111111020111111111110555"
  "111111020111111111111111111111111111111102011111102011111111111111141111111111111110201111110201111111111111111111111111111111020111111111110555"
  "111111020111111111111111111111111111111102011111102011111111111111111111111111111110201111110201111111111111111111111111111111020111111111110555"
  "111111020144444444444444444111111111111102011111102014141414141414151414141414141410201111110201111114444411111111111511111111020111111111110555"
  "111111020111111111111111111111111111111102011111102011111111111111111111111111111110201111110201111111111111111111111111111111020111111111110555"
  "111111020111111111111111111111111111111102011111102011111111111111141111111111111110201111110201111111111111111111111111111111020111111111110555"
  "111111020111999911111111115111111111111102011111102011111111111111111111111111111110201111110201111111111111111111111111111111020111111111110555"
  "111111020111999911111111111111111111111102011111102011111111111111141111111111111110201111110201111111111441111111111111111111020111111111110555"
  "111111022011999911111111111111111111111022011111102011111111111111111111111111111110201111110220111111444111111111111111111110220111111111110555"
  "111111022011199991111141141411114441111022011111102011111111111111141111111111111110201111110220111111111111111144114114111110220111111111110555"
  "111111022201199991111414141411111411110222011111102011111111111111111111111111111110201111110222011111111199111411141414111102220111111111110555"
  "111111022201119888111414141411111411110222011111102011111111111111141111111111111110201111110222011111111999941414144414111102220111111111110555"
  "111111022220118888811141141444111411102222011111102011111111111111111111111111111110201111110222201111119999411144141414441022220111111111110555"
  "111111022220111888777111111111111111102222011111102011111111111111141111111111111110201111110222201111111994111111111111111022220111111111110555"
  "111111022222011187777777111111111111022222011111102011111111111111111111111111111110201111110222220111111141111111111111110222220111111111110555"
  "111111022222201111777777777111111110222222011111102011111111111111141111111111111110201111110222222011111111111111111111102222220111111111110555"
  "111111022222220111117777777111111102222222011111102011111111111111111111111111111110201111110222222201111111111111111111022222220111111111110555"
  "111111022222222001111117777111110022222222011111102201111111111111141111111111111100201111110222222220011111111111111100222222220111111111110555"
  "111111102222222220001111111110002222222220111111110200111111111111111111111111111000011111111022222222200011111111100022222222201111111111110555"
  "111111102222222222220000000002222222222220111111110220000000000000000000000000000222011111111022222222222200000000022222222222201111111111110555"
  "111111110022222222222222222222222222222001111111111002222222222222222222222222222200111111111100222222222222222222222222222220011111111111110555"
  "111111111100000000000000000000000000000111111111111110000000000000000000000000000011111111111111000000000000000000000000000001111111111111110555"
  "111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111110555"
  "111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111110555"
  "111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111114441411411441144411411411444111144444111111111110555"
  "111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111411414114114141141411414111111114141111111111110555"
  "111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111411441114444144411411411441111114141111111111110555"
  "111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111411414114114141411411411114111114141111111111110555"
  "111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111114441411414114141141144114441111144444111111111110555"
  "111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111110555"
  "111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111110555"
};

// 33 x 33
char compassMap[] =
{
  "!!"
  "111111111111111111111111111111111"
  "111111111111111111111111111111111"
  "111111111111111111111111111111111"
  "111111111111116111611111111111111"
  "111111111131116111611131111111111"
  "111111111113116611611311111111111"
  "111111311113116161611311113111111"
  "111111131111316116613111131111111"
  "111111113111316111613111311111111"
  "111111111311116111611113111111111"
  "111131111131111111111131111131111"
  "111113311113111131111311113311111"
  "111111133111111131111111331111111"
  "111111111111111131111111111111111"
  "111777777711111131111117777777111"
  "111111117111111131111117117117111"
  "111111171113333333333317117117111"
  "111111117111111131111117117117111"
  "111777777711111131111117111117111"
  "111111111111111131111111111111111"
  "111111133111111131111111331111111"
  "111113311113111131111311113311111"
  "111131111131111111111131111131111"
  "111111111311111999111113111111111"
  "111111113111319111913111311111111"
  "111111131111319111113111131111111"
  "111111311113111999111311113111111"
  "111111111113111111911311111111111"
  "111111111131119111911131111111111"
  "111111111111111999111111111111111"
  "111111111111111111111111111111111"
  "111111111111111111111111111111111"
  "111111111111111111111111111111111"
};

// 31 x 6
char autoPilotMap[] =
{
  ".99999999999999999999999999999."
  "9999499494944499499999449999999"
  "9994949494994994949999494999999"
  "9994449494994994949999449999999"
  "9994949944994999499999499949999"
  ".99999999999999999999999999999."
};

// 31 x 6
char autoLandingMap[] =
{
  ".99999999999999999999999999999."
  "9949999499499494499494994994499"
  "9949994949449494949494494949999"
  "9949994449494494949494944949499"
  "9944494949499494499494994994499"
  ".99999999999999999999999999999."
};

// 19 x 6
char offIndicatorMap[] =
{
  ".99999999999999999."
  "9999949944494449999"
  "9999494949994999999"
  "9999494944994499999"
  "9999949949994999999"
  ".99999999999999999."
};


void initMap (char *map, int size)
{
  while (size--)
  {
    switch (*map)
    {
      case '0' : *map++ = GREY   + 2;  break;
      case '1' : *map++ = GREY   + 4;  break;
      case '2' : *map++ = GREY   + 6;  break;
      case '3' : *map++ = GREY   + 8;  break;
      case '4' : *map++ = GREY   + 10; break;
      case '5' : *map++ = BROWN  + 10; break;
      case '6' : *map++ = BLUE   + 10; break;
      case '7' : *map++ = GREEN  + 10; break;
      case '8' : *map++ = YELLOW + 10; break;
      case '9' : *map++ = RED    + 10; break;
      case '.' : *map++ = 0;           break;
      default  : map++;
    }
  }
}


void initCockpit (void)
{
  initMap (panelMap, sizeof (panelMap));
  initMap (compassMap, sizeof (compassMap));
  initMap (autoPilotMap, sizeof (autoPilotMap));
  initMap (autoLandingMap, sizeof (autoLandingMap));
  initMap (offIndicatorMap, sizeof (offIndicatorMap));
}


void displayCompass (int x, int y, int alpha)
{
  int i;

  struct POINT poly[] =
  {
    -1700, -1700, 0,
    -1700,  1700, 0,
     1700,  1700, 0,
     1700, -1700, 0
  };

  setAngle (0, 0, -alpha);
  setOrder ("z");
  transform (4, poly);

  for (i = 0; i < 4; i++)
  {
    poly[i].x = poly[i].x / 100 + x + 1;
    poly[i].y = poly[i].y / 100 + y + 1;
  }

  mapPoly (poly, compassMap);
}


void drawPointer (int x1, int y1, int alpha, int lenght, int color)
{
  int a = (1800 - alpha) % 3600;

  int x2 = (intSinMul (a, lenght << 8) >> 8) + x1;
  int y2 = (intCosMul (a, lenght << 8) >> 8) + y1;

  drawLine (x1, y1, x2, y2, color);
  fillCircle (x1, y1, 4, GREY + 6);
}



void displayHorizon (int x, int y, int a, int b)
{
  struct POINT poly[4] = {2500, 0, 5000, -2500, 0, 5000};

  a = (a > 1800) ? max (a, 3500) : min (a, 100);
  b = (b > 1800) ? max (b, 3500) : min (b, 100);

  setAngle (a, 0, b);
  setOrder ("xz");
  transform (2, poly);

  poly[0].x = poly[0].x / 100 + x;
  poly[0].y = poly[0].y / 100 + y;
  poly[1].x = poly[1].x / 100 + x;
  poly[1].y = poly[1].y / 100 + y;

  poly[2].x = x - 20;
  poly[2].y = y - 20;
  poly[3].x = x + 20;
  poly[3].y = y - 20;

  fillPoly (4, poly, BLUE + 8, GREY + 14);

  poly[2].x = x - 20;
  poly[2].y = y + 20;
  poly[3].x = x + 20;
  poly[3].y = y + 20;

  fillPoly (4, poly, GREEN + 8, GREY + 14);
}


void drawTube (int x1, int y1, int x2, int y2)
{
  int y, color, a, ai;

  a = -750;
  ai = 1500 / (y2 - y1);

  for (y = y1; y <= y2; y++)
  {
    color = RED + intCosMul (a, 15);
    drawLine (x1, y, x2, y, color);
    a += ai;
  }
}


static int speed;
static int fuel;
static int altitude;
static int oilTemperature;
static int oilPressure;
static int vertikalSpeed;
static int rotation;

void displayCockpit (struct MOBILE *ch)
{
  if (ch->collision)
  {
    drawLine (  0,  40,  80,   0, GREY + 15);
    drawLine (  0, 140, 160,  90, GREY + 13);
    drawLine ( 50, 120, 170, 199, GREY + 14);
    drawLine (140, 180, 310,   0, GREY + 11);
    drawLine (120,   0, 180, 140, GREY + 15);
    drawLine (240,   0, 290, 150, GREY + 14);
    drawLine (260,  60, 130,  20, GREY + 13);
    drawLine (319, 199, 280, 160, GREY + 13);
    drawLine (240, 199, 319, 120, GREY + 12);
  }

  if (cockpitOn)
  {
    // Kuenstlicher Horizont
    displayHorizon (111, 88, ch->angle.x, ch->angle.z);

    // Kompass
    displayCompass (24, 88, ch->angle.y);

    // Panel zeichnen
    putImage (0, 60, panelMap, 144, 140);
    drawTube (144, 110, 319, 130);

    // Geschwindigkeit
    speed = max (ch->xzSpeed * 20, 0);
    drawPointer (67, 88, speed - 1800, 13, GREY + 15);

    // Drehzahl
    rotation = ch->power << 2;
    drawPointer (24, 130, rotation, 13, GREY + 15);

    // Hoehe
    altitude = ch->position.y;
    drawPointer (110, 130, altitude / 10, 11, GREY + 12);
    drawPointer (110, 130, altitude, 13, GREY + 15);

    // Vertikale geschwindigkeit
    vertikalSpeed = (ch->ySpeed * 40);
    vertikalSpeed = min (max (vertikalSpeed, -1700), 1700);
    drawPointer (67, 130, vertikalSpeed - 900, 13, GREY + 15);

    // Oeldruck
    oilPressure = max (ch->power, 100);
    drawPointer (26, 169, oilPressure - 1000, 10, GREY + 15);

    // Oeltemperatur
    oilTemperature = max (ch->power, 300);
    drawPointer (26, 175, oilTemperature - 2100, 10, GREY + 15);

    // Treibstoffvorrat
    fuel = ch->fuel / 30;
    drawPointer (117, 172, fuel - 1350, 13, GREY + 15);

    // Position des Steuerknueppels
    drawPointer (67 - ch->steeringDirY / 12, 172 - ch->steeringDirX / 6,
      0, 0, GREY + 13);
  }
}


void displayStatus (struct MOBILE *ch)
{
  // Status
  if (autoLanding) putImage (9, 193, autoLandingMap, 31, 6);
  if (autoPilot) putImage (9, 193, autoPilotMap, 31, 6);
  if (!ch->power) putImage (49, 193, offIndicatorMap, 19, 6);
}

